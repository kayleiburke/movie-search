<main>

  <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-light">OMDB Database Search</h1>
        <p class="lead text-muted">
          Search for a movie by name
        </p>
        <div class="mx-auto" style="width: 400px">
          <%= form_with(url: movies_path, method: 'get', remote: true) do %>
            <div class="input-group input-group-md">
              <%= text_field_tag :movie, params[:movie], class: 'form-control', placeholder: "Search by Name" %>
              <span style="padding:0px 0px 0px 0px !important" class="input-group-addon">
            <%= button_tag type: "submit", class: "btn btn-primary" do %>
              <i class="fa fa-search"></i>
            <% end %>
            </span>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <% if flash[:alert] %>
      <div class="row">
        <div class="col-lg-12 mt-5">
          <div class="alert alert-warning"><%= flash[:alert] %></div>
          <div class="mx-auto mt-5" style="width: 400px">
          </div>
        </div>
      </div>
    <% end %>
  </section>

  <% if @movies.size > 0 %>
    <div class="album py-5 bg-light">
      <div class="container">

        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-5 g-3">
          <% @movies.each do |movie| %>
            <div class="col">
            <div class="card shadow-sm" style="height:600px;overflow:auto;">

              <%#= movie.data %>

              <% if movie.poster != "N/A" %>
                <img class="card-img-top" src="<%= movie.poster %>" width="100%"  />
              <% else %>
                <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: No Image Available" preserveAspectRatio="xMidYMid slice" focusable="false"><title>No Image Available</title><rect width="100%" height="100%" fill="#55595c"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">No Image Available</text></svg>
              <% end %>

              <div class="card-body">
                <div class="btn-group">
                  <small class="text-muted"><%= movie.year %></small>
                </div>
                <h2><%= movie.title %></h2>
                <!--<p><%#= movie.data %></p>-->
                <p class="card-text"><%= movie.plot %></p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <small class="text-muted"><%= movie.runtime %></small>
                  </div>
                  <small class="text-muted"><%= movie.rated %></small>
                </div>
              </div>
            </div>
          </div>
          <% end %>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 mt-5">
            <div class="text-center">
              <%= paginate @movies, theme: 'twitter-bootstrap-4' %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

</main>
